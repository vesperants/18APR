(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{7039:(e,a,s)=>{"use strict";s.d(a,{db:()=>o,j:()=>n});var l=s(3915),r=s(6203),t=s(5317);let i=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)({apiKey:"AIzaSyDxNYxQvEeRcQAGiiEptt1NDqGghegK_9A",authDomain:"vesp-a581d.firebaseapp.com",projectId:"vesp-a581d",storageBucket:"vesp-a581d.firebasestorage.app",messagingSenderId:"1295713609163",appId:"1:295713609163:web:6c8f377a79eec9ac3b924e"}),n=(0,r.xI)(i),o=(0,t.aU)(i)},9278:(e,a,s)=>{Promise.resolve().then(s.bind(s,9349))},9349:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var l=s(5155),r=s(2115),t=s(6874),i=s.n(t),n=s(6203),o=s(5317),d=s(7039);function c(){let[e,a]=(0,r.useState)(""),[s,t]=(0,r.useState)(""),[c,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[v,N]=(0,r.useState)(null),[f,w]=(0,r.useState)(!1),[S,A]=(0,r.useState)(!1),C=async(e,a)=>{try{let s=(0,o.H9)(d.db,"users",e);await (0,o.BN)(s,{...a,uid:e,createdAt:(0,o.O5)()}),console.log("User profile saved to Firestore")}catch(e){console.error("Error saving user profile to Firestore:",e),N("प्रोफाइल सुरक्षित गर्न असफल भयो, तर खाता सिर्जना भयो।")}},F=async a=>{if(a.preventDefault(),N(null),A(!1),!e||!s||!c||!p){N("कृपया इमेल, पासवर्ड, र नाम भर्नुहोस्।");return}if(s!==c){N("पासवर्डहरू मेल खाँदैनन्।");return}if(s.length<6){N("पासवर्ड कम्तिमा ६ अक्षरको हुनुपर्छ।");return}w(!0);try{let a=(await (0,n.eJ)(d.j,e,s)).user;console.log("User created in Auth:",a.uid);let l={email:a.email,name:p,companyName:u,address:b,phoneNumber:j};await C(a.uid,l),await (0,n.r7)(a,{displayName:p}),console.log("Firebase Auth profile updated with displayName."),await (0,n.gA)(a,{url:"".concat(window.location.origin,"/login"),handleCodeInApp:!0}),console.log("Verification email sent."),A(!0)}catch(e){e.code?(console.error("Registration Error (Firebase):",e.code,e.message),"auth/email-already-in-use"===e.code?N("यो इमेल पहिले नै दर्ता गरिएको छ।"):"auth/weak-password"===e.code?N("पासवर्ड कमजोर छ। कृपया बलियो पासवर्ड प्रयोग गर्नुहोस्।"):"auth/invalid-email"===e.code?N("अमान्य इमेल ढाँचा।"):N("दर्ता असफल भयो। कृपया फेरि प्रयास गर्नुहोस्।")):(console.error("Registration Error (Unknown):",e),N("दर्ता असफल भयो। कृपया फेरि प्रयास गर्नुहोस्।"))}finally{w(!1)}};return(0,l.jsxs)("div",{className:"container container--narrow",children:[(0,l.jsx)("h1",{className:"page-title",children:"नयाँ खाता दर्ता गर्नुहोस्"}),S?(0,l.jsxs)("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#e8f5e9",border:"1px solid #a5d6a7",borderRadius:"4px"},children:[(0,l.jsx)("h2",{style:{color:"#2e7d32"},children:"दर्ता सफल भयो!"}),(0,l.jsx)("p",{children:"तपाईंको खाता सिर्जना गरिएको छ। कृपया आफ्नो इमेल जाँच गर्नुहोस् र प्रमाणिकरण लिङ्कमा क्लिक गर्नुहोस्।"}),(0,l.jsx)("p",{style:{marginTop:"15px"},children:(0,l.jsx)(i(),{href:"/login",className:"button",children:"लगइन पृष्ठमा जानुहोस्"})})]}):(0,l.jsxs)("form",{onSubmit:F,children:[(0,l.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,l.jsxs)("label",{htmlFor:"name",className:"field-label",children:["पूरा नाम: ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)("input",{type:"text",id:"name",value:p,onChange:e=>m(e.target.value),required:!0,className:"search-box",disabled:f})]}),(0,l.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,l.jsxs)("label",{htmlFor:"email",className:"field-label",children:["इमेल: ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>a(e.target.value),required:!0,className:"search-box",disabled:f,placeholder:"your@email.com"})]}),(0,l.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,l.jsxs)("label",{htmlFor:"password",className:"field-label",children:["पासवर्ड: ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)("input",{type:"password",id:"password",value:s,onChange:e=>t(e.target.value),required:!0,className:"search-box",disabled:f,placeholder:" कम्तिमा ६ अक्षर"})]}),(0,l.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,l.jsxs)("label",{htmlFor:"confirmPassword",className:"field-label",children:["पासवर्ड पुष्टि गर्नुहोस्: ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)("input",{type:"password",id:"confirmPassword",value:c,onChange:e=>h(e.target.value),required:!0,className:"search-box",disabled:f,placeholder:"पुन: पासवर्ड टाइप गर्नुहोस्"})]}),(0,l.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,l.jsx)("label",{htmlFor:"companyName",className:"field-label",children:"कम्पनीको नाम (वैकल्पिक):"}),(0,l.jsx)("input",{type:"text",id:"companyName",value:u,onChange:e=>x(e.target.value),className:"search-box",disabled:f})]}),(0,l.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,l.jsx)("label",{htmlFor:"address",className:"field-label",children:"ठेगाना (वैकल्पिक):"}),(0,l.jsx)("input",{type:"text",id:"address",value:b,onChange:e=>g(e.target.value),className:"search-box",disabled:f})]}),(0,l.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,l.jsx)("label",{htmlFor:"phoneNumber",className:"field-label",children:"फोन नम्बर (वैकल्पिक):"}),(0,l.jsx)("input",{type:"tel",id:"phoneNumber",value:j,onChange:e=>y(e.target.value),className:"search-box",disabled:f})]}),v&&(0,l.jsx)("p",{style:{color:"red",textAlign:"center",marginBottom:"15px"},children:v}),(0,l.jsx)("div",{className:"button-container",style:{marginTop:"0"},children:(0,l.jsx)("button",{type:"submit",className:"button button-search",disabled:f,children:f?"दर्ता हुँदैछ...":"दर्ता गर्नुहोस्"})})]}),!S&&(0,l.jsxs)("p",{style:{marginTop:"30px",textAlign:"center"},children:["पहिले नै खाता छ? ",(0,l.jsx)(i(),{href:"/login",children:"यहाँ लगइन गर्नुहोस्"})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,158,645,874,441,684,358],()=>a(9278)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{2671:(e,n,r)=>{"use strict";r.d(n,{P:()=>t});let t={loading:{ne:"लोड हुँदैछ...",en:"Loading..."},goBackHome:{ne:"गृहपृष्ठमा फर्कनुहोस्",en:"Go back to Homepage"},loginTitle:{ne:"लगइन गर्नुहोस्",en:"Login"},emailLabel:{ne:"इमेल:",en:"Email:"},passwordLabel:{ne:"पासवर्ड:",en:"Password:"},loginButton:{ne:"लगइन",en:"Login"},loggingInButton:{ne:"लगइन हुँदैछ...",en:"Logging in..."},noAccount:{ne:"खाता छैन?",en:"No account?"},registerHere:{ne:"यहाँ दर्ता गर्नुहोस्",en:"Register here"},errorCredentials:{ne:"अमान्य इमेल वा पासवर्ड।",en:"Invalid email or password."},errorInvalidEmail:{ne:"अमान्य इमेल ढाँचा।",en:"Invalid email format."},errorTooManyRequests:{ne:"धेरै पटक असफल प्रयास भयो। कृपया केही बेर पर्खनुहोस्।",en:"Too many failed attempts. Please wait."},errorLoginFailed:{ne:"लगइन असफल भयो। कृपया फेरि प्रयास गर्नुहोस्।",en:"Login failed. Please try again."},errorFillBoth:{ne:"कृपया इमेल र पासवर्ड दुवै प्रविष्ट गर्नुहोस्।",en:"Please enter both email and password."},errorNotVerified:{ne:"लगइन असफल भयो वा इमेल प्रमाणित छैन।",en:"Login failed or email not verified."},editProfileTooltip:{ne:"प्रोफाइल सम्पादन गर्नुहोस्",en:"Edit Profile"},signOutFailed:{ne:"साइन आउट गर्न असफल भयो।",en:"Failed to sign out."},loadingOrAccessDenied:{ne:"लोड हुँदैछ वा पहुँच अस्वीकृत...",en:"Loading or Access Denied..."},profileTitle:{ne:"प्रोफाइल सम्पादन गर्नुहोस्",en:"Edit Profile"},personalInfo:{ne:"व्यक्तिगत जानकारी",en:"Personal Information"},fullNameLabel:{ne:"पूरा नाम:",en:"Full Name:"},companyNameLabel:{ne:"कम्पनीको नाम:",en:"Company Name:"},addressLabel:{ne:"ठेगाना:",en:"Address:"},phoneLabel:{ne:"फोन नम्बर:",en:"Phone Number:"},saveProfileButton:{ne:"प्रोफाइल सुरक्षित गर्नुहोस्",en:"Save Profile"},savingProfileButton:{ne:"अद्यावधिक हुँदै...",en:"Updating..."},profileUpdateSuccess:{ne:"प्रोफाइल सफलतापूर्वक अद्यावधिक गरियो!",en:"Profile updated successfully!"},profileUpdateError:{ne:"प्रोफाइल अद्यावधिक गर्दा त्रुटि भयो।",en:"Error updating profile."},profileFetchError:{ne:"प्रोफाइल ल्याउन असफल भयो।",en:"Failed to fetch profile."},profileNotFoundError:{ne:"प्रोफाइल फेला परेन।",en:"Profile not found."},fillNameError:{ne:"कृपया नाम भर्नुहोस्।",en:"Please fill in the name."},changePasswordTitle:{ne:"पासवर्ड परिवर्तन गर्नुहोस्",en:"Change Password"},currentPasswordLabel:{ne:"हालको पासवर्ड:",en:"Current Password:"},newPasswordLabel:{ne:"नयाँ पासवर्ड:",en:"New Password:"},confirmNewPasswordLabel:{ne:"नयाँ पासवर्ड पुष्टि गर्नुहोस्:",en:"Confirm New Password:"},changePasswordButton:{ne:"पासवर्ड परिवर्तन गर्नुहोस्",en:"Change Password"},changingPasswordButton:{ne:"परिवर्तन हुँदै...",en:"Changing..."},passwordChangeSuccess:{ne:"पासवर्ड सफलतापूर्वक परिवर्तन गरियो!",en:"Password changed successfully!"},passwordChangeError:{ne:"पासवर्ड परिवर्तन गर्न असफल भयो।",en:"Failed to change password."},passwordWrongError:{ne:"हालको पासवर्ड गलत छ।",en:"Current password incorrect."},passwordWeakError:{ne:"नयाँ पासवर्ड कमजोर छ।",en:"New password is too weak."},passwordMismatchError:{ne:"नयाँ पासवर्डहरू मेल खाँदैनन्।",en:"New passwords do not match."},passwordLengthError:{ne:"नयाँ पासवर्ड कम्तिमा ६ अक्षरको हुनुपर्छ।",en:"New password must be at least 6 characters."},passwordFillAllError:{ne:"कृपया सबै पासवर्ड फिल्डहरू भर्नुहोस्।",en:"Please fill all password fields."},profileLoading:{ne:"प्रोफाइल लोड हुँदैछ...",en:"Loading profile..."},loginRequired:{ne:"पहुँच गर्न लगइन आवश्यक छ।",en:"Login required to access."},atLeast6Chars:{ne:"कम्तिमा ६ अक्षर",en:"At least 6 characters"},chatTitle:{ne:"भेस्प च्याट",en:"Vesp Chat"},backButton:{ne:"पछाडि",en:"Back"},startConversation:{ne:"कुराकानी सुरु गर्नुहोस्!",en:"Start a conversation!"},typeMessage:{ne:"आफ्नो सन्देश टाइप गर्नुहोस्...",en:"Type your message..."},sendButton:{ne:"पठाउनुहोस्",en:"Send"},placeholderResponse:{ne:"यो एक प्लेसहोल्डर प्रतिक्रिया हो।",en:"This is a placeholder response."},signUpTitle:{ne:"नयाँ खाता दर्ता गर्नुहोस्",en:"Register New Account"},confirmPasswordLabel:{ne:"पासवर्ड पुष्टि गर्नुहोस्:",en:"Confirm Password:"},registerButton:{ne:"दर्ता गर्नुहोस्",en:"Register"},registeringButton:{ne:"दर्ता हुँदैछ...",en:"Registering..."},errorMessage:{ne:"माफ गर्नुहोस्, केहि गडबड भयो।",en:"Sorry, something went wrong."},you:{ne:"तपाईं",en:"You"},botName:{ne:"बोट",en:"Bot"},botTyping:{ne:"टाइप गर्दै...",en:"Typing..."},fileAlreadySelected:{ne:"फाइल पहिले नै चयन गरिएको छ।",en:"File already selected."},fileReadError:{ne:"फाइल पढ्न त्रुटि",en:"Error reading file"},fileUploadSuccess:{ne:"फाइल सफलतापूर्वक अपलोड भयो",en:"File uploaded successfully"},signOutButton:{ne:"साइन आउट",en:"Sign Out"},goBack:{ne:"पछाडि जानुहोस्",en:"Go Back"},toggleShelf:{ne:"मेनु टगल गर्नुहोस्",en:"Toggle Menu"}}},3246:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>g});var t=r(5155),a=r(2115),s=r(5695),o=r(9576),l=r(8332),i=r(2671),d=r(6565),c=r(7039),u=r(5317),p=r(6203);function g(){let{user:e,loading:n,signOut:r}=(0,o.A)(),{language:g}=(0,l.o)(),h=(0,s.useRouter)(),[m,f]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[w,P]=(0,a.useState)(""),[y,v]=(0,a.useState)(""),[N,j]=(0,a.useState)(!0),[E,S]=(0,a.useState)(!1),[B,C]=(0,a.useState)(null),[L,k]=(0,a.useState)(null),[A,F]=(0,a.useState)(""),[T,I]=(0,a.useState)(""),[R,O]=(0,a.useState)(""),[U,q]=(0,a.useState)(!1),[D,_]=(0,a.useState)(null),[M,W]=(0,a.useState)(null);(0,a.useEffect)(()=>{n||e&&e.emailVerified||h.push("/login")},[e,n,h]),(0,a.useEffect)(()=>{(async()=>{if(e&&e.emailVerified&&g){j(!0),C(null);try{let n=(0,u.H9)(c.db,"users",e.uid),r=await (0,u.x7)(n);if(r.exists()){let e=r.data();f(e.name||""),b(e.companyName||""),P(e.address||""),v(e.phoneNumber||"")}else console.log("No profile document found for user:",e.uid),C(i.P.profileNotFoundError[g])}catch(e){console.error("Error fetching profile:",e),C(i.P.profileFetchError[g])}finally{j(!1)}}})()},[e,g]);let z=async n=>{if(n.preventDefault(),e){if(C(null),k(null),S(!0),!m){C(i.P.fillNameError[g]),S(!1);return}try{let n=(0,u.H9)(c.db,"users",e.uid);await (0,u.mZ)(n,{name:m,companyName:x,address:w,phoneNumber:y,updatedAt:(0,u.O5)()}),k(i.P.profileUpdateSuccess[g]),setTimeout(()=>k(null),3e3)}catch(e){console.error("Error updating profile:",e),C(i.P.profileUpdateError[g])}finally{S(!1)}}},G=async n=>{if(n.preventDefault(),e&&e.email){if(_(null),W(null),!A||!T||!R){_(i.P.passwordFillAllError[g]);return}if(T!==R){_(i.P.passwordMismatchError[g]);return}if(T.length<6){_(i.P.passwordLengthError[g]);return}q(!0);try{let n=p.IX.credential(e.email,A);await (0,p.kZ)(e,n),await (0,p.f3)(e,T),W(i.P.passwordChangeSuccess[g]),F(""),I(""),O(""),setTimeout(()=>W(null),3e3)}catch(e){console.error("Password Change Error:",e.code,e.message),"auth/wrong-password"===e.code||"auth/invalid-credential"===e.code?_(i.P.passwordWrongError[g]):"auth/weak-password"===e.code?_(i.P.passwordWeakError[g]):_(i.P.passwordChangeError[g])}finally{q(!1)}}};if(n||N||!g){let e=g?i.P.profileLoading[g]:"Loading...";return(0,t.jsx)("div",{className:"container",style:{textAlign:"center",marginTop:"50px"},children:e})}return e?(0,t.jsxs)("div",{className:"container container--medium",style:{position:"relative",paddingTop:"70px"},children:[(0,t.jsx)("button",{onClick:()=>h.back(),style:{position:"absolute",top:"15px",left:"15px",background:"none",border:"none",padding:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#555"},title:i.P.goBack[g]||"Go Back",children:(0,t.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,t.jsx)("div",{style:{position:"absolute",top:"21px",right:"15px"},children:(0,t.jsx)(d.v,{})}),(0,t.jsx)("h1",{className:"page-title",children:i.P.profileTitle[g]}),(0,t.jsxs)("section",{style:{marginBottom:"40px",borderBottom:"1px solid #eee",paddingBottom:"30px"},children:[(0,t.jsx)("h2",{style:{marginBottom:"20px",fontSize:"1.2em"},children:i.P.personalInfo[g]}),(0,t.jsxs)("form",{onSubmit:z,children:[(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsxs)("label",{htmlFor:"profileName",className:"field-label",children:[i.P.fullNameLabel[g]," ",(0,t.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"profileName",value:m,onChange:e=>f(e.target.value),required:!0,className:"search-box",disabled:E})]}),(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{htmlFor:"companyName",className:"field-label",children:i.P.companyNameLabel[g]}),(0,t.jsx)("input",{type:"text",id:"companyName",value:x,onChange:e=>b(e.target.value),className:"search-box",disabled:E})]}),(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{htmlFor:"address",className:"field-label",children:i.P.addressLabel[g]}),(0,t.jsx)("input",{type:"text",id:"address",value:w,onChange:e=>P(e.target.value),className:"search-box",disabled:E})]}),(0,t.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,t.jsx)("label",{htmlFor:"phoneNumber",className:"field-label",children:i.P.phoneLabel[g]}),(0,t.jsx)("input",{type:"tel",id:"phoneNumber",value:y,onChange:e=>v(e.target.value),className:"search-box",disabled:E})]}),B&&(0,t.jsx)("p",{style:{color:"red",marginBottom:"15px"},children:B}),L&&(0,t.jsx)("p",{style:{color:"green",marginBottom:"15px"},children:L}),(0,t.jsx)("div",{className:"button-container",style:{justifyContent:"flex-start"},children:(0,t.jsx)("button",{type:"submit",className:"button button-search",disabled:E,children:E?i.P.savingProfileButton[g]:i.P.saveProfileButton[g]})})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{style:{marginBottom:"20px",fontSize:"1.2em"},children:i.P.changePasswordTitle[g]}),(0,t.jsxs)("form",{onSubmit:G,children:[(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsxs)("label",{htmlFor:"currentPassword",className:"field-label",children:[i.P.currentPasswordLabel[g]," ",(0,t.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,t.jsx)("input",{type:"password",id:"currentPassword",value:A,onChange:e=>F(e.target.value),required:!0,className:"search-box",disabled:U})]}),(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsxs)("label",{htmlFor:"newPassword",className:"field-label",children:[i.P.newPasswordLabel[g]," ",(0,t.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,t.jsx)("input",{type:"password",id:"newPassword",value:T,onChange:e=>I(e.target.value),required:!0,className:"search-box",disabled:U,placeholder:i.P.atLeast6Chars[g]})]}),(0,t.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,t.jsxs)("label",{htmlFor:"confirmNewPassword",className:"field-label",children:[i.P.confirmNewPasswordLabel[g]," ",(0,t.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,t.jsx)("input",{type:"password",id:"confirmNewPassword",value:R,onChange:e=>O(e.target.value),required:!0,className:"search-box",disabled:U})]}),D&&(0,t.jsx)("p",{style:{color:"red",marginBottom:"15px"},children:D}),M&&(0,t.jsx)("p",{style:{color:"green",marginBottom:"15px"},children:M}),(0,t.jsx)("div",{className:"button-container",style:{justifyContent:"flex-start"},children:(0,t.jsx)("button",{type:"submit",className:"button button-search",disabled:U,children:U?i.P.changingPasswordButton[g]:i.P.changePasswordButton[g]})})]})]}),(0,t.jsx)("section",{style:{marginTop:"40px",paddingTop:"30px",borderTop:"1px solid #eee",textAlign:"center"},children:(0,t.jsx)("button",{onClick:async()=>{try{await r(),h.push("/login")}catch(e){console.error("Sign Out Error (Profile Page):",e),alert(i.P.signOutFailed[g]||"Sign out failed. Please try again.")}},className:"button",style:{backgroundColor:"#dc3545",color:"white",padding:"10px 20px",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"1em"},children:i.P.signOutButton[g]||"Sign Out"})})]}):(0,t.jsx)("div",{className:"container",style:{textAlign:"center",marginTop:"50px"},children:i.P.loginRequired[g]})}},5695:(e,n,r)=>{"use strict";var t=r(8999);r.o(t,"useRouter")&&r.d(n,{useRouter:function(){return t.useRouter}})},6565:(e,n,r)=>{"use strict";r.d(n,{v:()=>s});var t=r(5155);r(2115);var a=r(8332);r(8966);let s=()=>{let{language:e,toggleLanguage:n}=(0,a.o)(),r="en"===e;return(0,t.jsx)("button",{className:"language-button ".concat(r?"nepali-option":"english-option"),onClick:n,title:r?"नेपालीमा बदल्नुहोस्":"Switch to English","aria-label":r?"Switch to Nepali":"Switch to English",children:r?"ने":"EN"})}},6968:(e,n,r)=>{Promise.resolve().then(r.bind(r,3246))},7039:(e,n,r)=>{"use strict";r.d(n,{db:()=>i,j:()=>l});var t=r(3915),a=r(6203),s=r(5317);let o=(0,t.Dk)().length?(0,t.Sx)():(0,t.Wp)({apiKey:"AIzaSyDxNYxQvEeRcQAGiiEptt1NDqGghegK_9A",authDomain:"vesp-a581d.firebaseapp.com",projectId:"vesp-a581d",storageBucket:"vesp-a581d.firebasestorage.app",messagingSenderId:"1295713609163",appId:"1:295713609163:web:6c8f377a79eec9ac3b924e"}),l=(0,a.xI)(o),i=(0,s.aU)(o)},8332:(e,n,r)=>{"use strict";r.d(n,{LanguageProvider:()=>o,o:()=>l});var t=r(5155),a=r(2115);let s=(0,a.createContext)(void 0),o=e=>{let{children:n}=e,[r,o]=(0,a.useState)("ne"),[l,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("appLanguage");e&&("ne"===e||"en"===e)&&o(e),i(!0)},[]);let d=e=>{if(l)try{o(e),localStorage.setItem("appLanguage",e),document.documentElement.lang=e}catch(e){console.error("Could not save language preference:",e)}};return l?(0,t.jsx)(s.Provider,{value:{language:r,setLanguage:d,toggleLanguage:()=>{d("ne"===r?"en":"ne")}},children:n}):null},l=()=>{let e=(0,a.useContext)(s);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},8966:()=>{},9576:(e,n,r)=>{"use strict";r.d(n,{A:()=>d,AuthProvider:()=>i});var t=r(5155),a=r(2115),s=r(6203),o=r(7039);let l=(0,a.createContext)({user:null,loading:!0,signOut:async()=>{console.error("Attempted to sign out before AuthProvider was initialized.")}}),i=e=>{let{children:n}=e,[r,i]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,s.hg)(o.j,e=>{i(e),c(!1),console.log("Auth State Changed, User:",(null==e?void 0:e.email)||"logged out")});return()=>e()},[]);let u=async()=>{c(!0);try{await (0,s.CI)(o.j),console.log("User signed out successfully via context.")}catch(e){throw console.error("Error signing out: ",e),c(!1),e}};return(0,t.jsx)(l.Provider,{value:{user:r,loading:d,signOut:u},children:n})},d=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var n=n=>e(e.s=n);e.O(0,[169,992,158,645,441,684,358],()=>n(6968)),_N_E=e.O()}]);